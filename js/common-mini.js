function autocomplete(e,t){var a,s;function l(e){if(!e)return!1;(function e(t){for(var a=0;a<t.length;a++)t[a].classList.remove("autocomplete-active")})(e),a>=e.length&&(a=0),a<0&&(a=e.length-1),e[a].classList.add("autocomplete-active")}function i(t){for(var a=document.getElementsByClassName("autocomplete-items"),s=0;s<a.length;s++)t!=a[s]&&t!=e&&a[s].parentNode.removeChild(a[s])}function n(e){window.location.href=e}e.addEventListener("input",function(l){var o=this.value;return!(o.length<3)&&(i(),a=-1,s&&s.abort(),searchType=document.getElementById("search-type").value,(s=new XMLHttpRequest).open("GET",t+searchType+"/key?q="+encodeURIComponent(o),!0),s.onload=function(){200===s.status&&function e(t,a,s){var l,o,r,c,d,p=t.value;for((l=document.createElement("DIV")).setAttribute("id",t.id+"autocomplete-list"),l.setAttribute("class","autocomplete-items"),t.parentNode.appendChild(l),c=0;c<a.length;c++){(o=document.createElement("DIV")).setAttribute("class","ac-item");var m="",v="";"employees"==s?(v="/emp/"+a[c].employee_permalink,m+="<div class='row m-0 p-0'>",m+="<div class='col p-0 name'><a href='"+v+"'>"+a[c].full_name.replace(RegExp(p,"gi"),"<b>$&</b>")+"</a></div>",m+="<div class='col p-0 last'>Last appeared in "+a[c].year+"</div>",m+="</div>",m+="<div class='row m-0 p-0'><div class='col p-0 second'>"+a[c].job_title+"<b> at </b>"+a[c].employer_title+"</div></div>",d="/search?search-type=employees&skeyword="+p):"employers"==s?(v="/org/"+a[c].employer_permalink+"/"+a[c].sector_permalink,m+="<div class='row m-0 p-0'>",m+="<div class='col-sm-7 p-0 name'><a href='"+v+"'>"+a[c].employer_title.replace(RegExp(p,"gi"),"<b>$&</b>")+"</a></div>",m+="<div class='col-sm-5 p-0 last'>Last appeared in "+a[c].last_seen_year+"</div>",m+="</div>",m+="<div class='row m-0 p-0'><div class='col p-0 second'>"+a[c].sector_title+" ("+a[c].employee_num+" employees)</div></div>",d="/search?search-type=employers&skeyword="+p):"jobs"==s&&(v="/job/"+a[c].permalink,m+="<div class='row m-0 p-0'>",m+="<div class='col-sm-7 p-0 name'><a href='"+v+"'>"+a[c].title_en.replace(RegExp(p,"gi"),"<b>$&</b>")+"</a></div>",m+="<div class='col-sm-5 p-0 last'>Last appeared in "+a[c].last_seen_year+"</div>",m+="</div>",d="/search?search-type=jobs&skeyword="+p),m+="<input type='hidden' value='"+v+"'>",o.innerHTML=m,o.addEventListener("click",function(e){n(this.getElementsByTagName("input")[0].value),i()}),l.appendChild(o)}a.length>9&&((r=document.createElement("DIV")).setAttribute("class","ac-item"),m="<div class='row m-0 p-1'><div class='col p-0 last'><a href="+d+"><b>See More... </b></a></div></div>",r.innerHTML=m,l.appendChild(r))}(e,JSON.parse(s.responseText),searchType)},s.send(),!!o&&void 0)}),e.addEventListener("keydown",function(e){var t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),40==e.keyCode?(a++,l(t)):38==e.keyCode?(a--,l(t)):13==e.keyCode&&(e.preventDefault(),a>-1&&t&&t[a].click())}),document.addEventListener("click",function(e){i(e.target)})}